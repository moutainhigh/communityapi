<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="net.okdi.api.dao.ShopBroadcastInfoMapper" >
  <resultMap id="BaseResultMap" type="net.okdi.api.entity.ShopBroadcastInfo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 22 12:38:40 CST 2015.
    -->
    <id column="broadcast_id" property="broadcastId" jdbcType="BIGINT" />
    <result column="sender_name" property="senderName" jdbcType="VARCHAR" />
    <result column="sender_phone" property="senderPhone" jdbcType="VARCHAR" />
    <result column="sender_town_id" property="senderTownId" jdbcType="BIGINT" />
    <result column="sender_town_name" property="senderTownName" jdbcType="VARCHAR" />
    <result column="sender_address" property="senderAddress" jdbcType="VARCHAR" />
    <result column="sender_longitude" property="senderLongitude" jdbcType="DECIMAL" />
    <result column="sender_latitude" property="senderLatitude" jdbcType="DECIMAL" />
    <result column="addressee_name" property="addresseeName" jdbcType="VARCHAR" />
    <result column="addressee_phone" property="addresseePhone" jdbcType="VARCHAR" />
    <result column="addressee_town_id" property="addresseeTownId" jdbcType="BIGINT" />
    <result column="addressee_town_name" property="addresseeTownName" jdbcType="VARCHAR" />
    <result column="addressee_address" property="addresseeAddress" jdbcType="VARCHAR" />
    <result column="addressee_longitude" property="addresseeLongitude" jdbcType="DECIMAL" />
    <result column="addressee_latitude" property="addresseeLatitude" jdbcType="DECIMAL" />
    <result column="trade_distance" property="tradeDistance" jdbcType="DECIMAL" />
    <result column="shop_name" property="shopName" jdbcType="VARCHAR" />
    <result column="shop_phone" property="shopPhone" jdbcType="VARCHAR" />
    <result column="service_time" property="serviceTime" jdbcType="TIMESTAMP" />
    <result column="trade_num" property="tradeNum" jdbcType="VARCHAR" />
    <result column="product_num" property="productNum" jdbcType="SMALLINT" />
    <result column="collection_money" property="collectionMoney" jdbcType="DECIMAL" />
    <result column="freight_money" property="freightMoney" jdbcType="DECIMAL" />
    <result column="total_amount" property="totalAmount" jdbcType="DECIMAL" />
    <result column="broadcast_status" property="broadcastStatus" jdbcType="SMALLINT" />
    <result column="single_time" property="singleTime" jdbcType="TIMESTAMP" />
    <result column="take_time" property="takeTime" jdbcType="TIMESTAMP" />
    <result column="finish_time" property="finishTime" jdbcType="TIMESTAMP" />
    <result column="cancel_time" property="cancelTime" jdbcType="TIMESTAMP" />
    <result column="member_id" property="memberId" jdbcType="BIGINT" />
    <result column="member_distance" property="memberDistance" jdbcType="DECIMAL" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="modity_time" property="modityTime" jdbcType="TIMESTAMP" />
  </resultMap>
 <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 22 12:38:40 CST 2015.
    -->
    broadcast_id, sender_name, sender_phone, sender_town_id, sender_town_name, sender_address, 
    sender_longitude, sender_latitude, addressee_name, addressee_phone, addressee_town_id, 
    addressee_town_name, addressee_address, addressee_longitude, addressee_latitude, 
    trade_distance, shop_name, shop_phone, service_time, trade_num, product_num, collection_money, 
    freight_money, total_amount, broadcast_status, single_time, take_time, finish_time, 
    cancel_time, member_id, member_distance, create_time, modity_time
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 22 12:38:40 CST 2015.
    -->
    select 
    <include refid="Base_Column_List" />
    from shop_broadcast_info
    where broadcast_id = #{broadcastId,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 22 12:38:40 CST 2015.
    -->
    delete from shop_broadcast_info
    where broadcast_id = #{broadcastId,jdbcType=BIGINT}
  </delete>
 <!-- <insert id="insert" parameterType="net.okdi.api.entity.ShopBroadcastInfo" >
    
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 22 12:38:40 CST 2015.
   
    insert into shop_broadcast_info (broadcast_id, sender_name, sender_phone, 
      sender_town_id, sender_town_name, sender_address, 
      sender_longitude, sender_latitude, addressee_name, 
      addressee_phone, addressee_town_id, addressee_town_name, 
      addressee_address, addressee_longitude, addressee_latitude, 
      trade_distance, shop_name, shop_phone, service_time, 
      trade_num, product_num, collection_money, 
      freight_money, total_amount, broadcast_status, 
      single_time, take_time, finish_time, 
      cancel_time, member_id, member_distance, 
      create_time, modity_time)
    values (#{broadcastId,jdbcType=BIGINT}, #{senderName,jdbcType=VARCHAR}, #{senderPhone,jdbcType=VARCHAR}, 
      #{senderTownId,jdbcType=BIGINT}, #{senderTownName,jdbcType=VARCHAR}, #{senderAddress,jdbcType=VARCHAR}, 
      #{senderLongitude,jdbcType=DECIMAL}, #{senderLatitude,jdbcType=DECIMAL}, #{addresseeName,jdbcType=VARCHAR}, 
      #{addresseePhone,jdbcType=VARCHAR}, #{addresseeTownId,jdbcType=BIGINT}, #{addresseeTownName,jdbcType=VARCHAR}, 
      #{addresseeAddress,jdbcType=VARCHAR}, #{addresseeLongitude,jdbcType=DECIMAL}, #{addresseeLatitude,jdbcType=DECIMAL}, 
      #{tradeDistance,jdbcType=DECIMAL}, #{shopName,jdbcType=VARCHAR}, #{shopPhone,jdbcType=VARCHAR}, #{serviceTime,jdbcType=TIMESTAMP}, 
      #{tradeNum,jdbcType=VARCHAR}, #{productNum,jdbcType=SMALLINT}, #{collectionMoney,jdbcType=DECIMAL}, 
      #{freightMoney,jdbcType=DECIMAL}, #{totalAmount,jdbcType=DECIMAL}, #{broadcastStatus,jdbcType=SMALLINT}, 
      #{singleTime,jdbcType=TIMESTAMP}, #{takeTime,jdbcType=TIMESTAMP}, #{finishTime,jdbcType=TIMESTAMP}, 
      #{cancelTime,jdbcType=TIMESTAMP}, #{memberId,jdbcType=BIGINT}, #{memberDistance,jdbcType=DECIMAL}, 
      #{createTime,jdbcType=TIMESTAMP}, #{modityTime,jdbcType=TIMESTAMP})
  </insert> -->
  <insert id="insert" parameterType="net.okdi.api.entity.ShopBroadcastInfo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 22 12:38:40 CST 2015.
    -->
    insert into shop_broadcast_info (broadcast_id, sender_name, sender_phone, 
      sender_town_id, sender_town_name, sender_address, 
      sender_longitude, sender_latitude, addressee_name, 
      addressee_phone, addressee_town_id, addressee_town_name, 
      addressee_address, addressee_longitude, addressee_latitude, 
      trade_distance, shop_name, shop_phone, service_time, 
      trade_num, product_num, collection_money, 
      freight_money, total_amount, broadcast_status,
      create_time,payment_method,confirm_receipt)
    values (#{broadcastId,jdbcType=BIGINT}, #{senderName,jdbcType=VARCHAR}, #{senderPhone,jdbcType=VARCHAR}, 
      #{senderTownId,jdbcType=BIGINT}, #{senderTownName,jdbcType=VARCHAR}, #{senderAddress,jdbcType=VARCHAR}, 
      #{senderLongitude,jdbcType=DECIMAL}, #{senderLatitude,jdbcType=DECIMAL}, #{addresseeName,jdbcType=VARCHAR}, 
      #{addresseePhone,jdbcType=VARCHAR}, #{addresseeTownId,jdbcType=BIGINT}, #{addresseeTownName,jdbcType=VARCHAR}, 
      #{addresseeAddress,jdbcType=VARCHAR}, #{addresseeLongitude,jdbcType=DECIMAL}, #{addresseeLatitude,jdbcType=DECIMAL}, 
      #{tradeDistance,jdbcType=DECIMAL}, #{shopName,jdbcType=VARCHAR}, #{shopPhone,jdbcType=VARCHAR}, #{serviceTime,jdbcType=TIMESTAMP}, 
      #{tradeNum,jdbcType=VARCHAR}, #{productNum,jdbcType=SMALLINT}, #{collectionMoney,jdbcType=DECIMAL}, 
      #{freightMoney,jdbcType=DECIMAL}, #{totalAmount,jdbcType=DECIMAL}, #{broadcastStatus,jdbcType=SMALLINT}, 
      null)
      <!-- #{createTime,jdbcType=TIMESTAMP}) -->
  </insert>
  <insert id="insertSelective" parameterType="net.okdi.api.entity.ShopBroadcastInfo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 22 12:38:40 CST 2015.
    -->
    insert into shop_broadcast_info
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="broadcastId != null" >
        broadcast_id,
      </if>
      <if test="senderName != null" >
        sender_name,
      </if>
      <if test="senderPhone != null" >
        sender_phone,
      </if>
      <if test="senderTownId != null" >
        sender_town_id,
      </if>
      <if test="senderTownName != null" >
        sender_town_name,
      </if>
      <if test="senderAddress != null" >
        sender_address,
      </if>
      <if test="senderLongitude != null" >
        sender_longitude,
      </if>
      <if test="senderLatitude != null" >
        sender_latitude,
      </if>
      <if test="addresseeName != null" >
        addressee_name,
      </if>
      <if test="addresseePhone != null" >
        addressee_phone,
      </if>
      <if test="addresseeTownId != null" >
        addressee_town_id,
      </if>
      <if test="addresseeTownName != null" >
        addressee_town_name,
      </if>
      <if test="addresseeAddress != null" >
        addressee_address,
      </if>
      <if test="addresseeLongitude != null" >
        addressee_longitude,
      </if>
      <if test="addresseeLatitude != null" >
        addressee_latitude,
      </if>
      <if test="tradeDistance != null" >
        trade_distance,
      </if>
      <if test="shopName != null" >
        shop_name,
      </if>
      <if test="shopPhone != null" >
        shop_phone,
      </if>
      <if test="serviceTime != null" >
        service_time,
      </if>
      <if test="tradeNum != null" >
        trade_num,
      </if>
      <if test="productNum != null" >
        product_num,
      </if>
      <if test="collectionMoney != null" >
        collection_money,
      </if>
      <if test="freightMoney != null" >
        freight_money,
      </if>
      <if test="totalAmount != null" >
        total_amount,
      </if>
      <if test="broadcastStatus != null" >
        broadcast_status,
      </if>
      <if test="singleTime != null" >
        single_time,
      </if>
      <if test="takeTime != null" >
        take_time,
      </if>
      <if test="finishTime != null" >
        finish_time,
      </if>
      <if test="cancelTime != null" >
        cancel_time,
      </if>
      <if test="memberId != null" >
        member_id,
      </if>
      <if test="memberDistance != null" >
        member_distance,
      </if>
      <if test="createTime != null" >
        create_time,
      </if>
      <if test="modityTime != null" >
        modity_time,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="broadcastId != null" >
        #{broadcastId,jdbcType=BIGINT},
      </if>
      <if test="senderName != null" >
        #{senderName,jdbcType=VARCHAR},
      </if>
      <if test="senderPhone != null" >
        #{senderPhone,jdbcType=VARCHAR},
      </if>
      <if test="senderTownId != null" >
        #{senderTownId,jdbcType=BIGINT},
      </if>
      <if test="senderTownName != null" >
        #{senderTownName,jdbcType=VARCHAR},
      </if>
      <if test="senderAddress != null" >
        #{senderAddress,jdbcType=VARCHAR},
      </if>
      <if test="senderLongitude != null" >
        #{senderLongitude,jdbcType=DECIMAL},
      </if>
      <if test="senderLatitude != null" >
        #{senderLatitude,jdbcType=DECIMAL},
      </if>
      <if test="addresseeName != null" >
        #{addresseeName,jdbcType=VARCHAR},
      </if>
      <if test="addresseePhone != null" >
        #{addresseePhone,jdbcType=VARCHAR},
      </if>
      <if test="addresseeTownId != null" >
        #{addresseeTownId,jdbcType=BIGINT},
      </if>
      <if test="addresseeTownName != null" >
        #{addresseeTownName,jdbcType=VARCHAR},
      </if>
      <if test="addresseeAddress != null" >
        #{addresseeAddress,jdbcType=VARCHAR},
      </if>
      <if test="addresseeLongitude != null" >
        #{addresseeLongitude,jdbcType=DECIMAL},
      </if>
      <if test="addresseeLatitude != null" >
        #{addresseeLatitude,jdbcType=DECIMAL},
      </if>
      <if test="tradeDistance != null" >
        #{tradeDistance,jdbcType=DECIMAL},
      </if>
      <if test="shopName != null" >
        #{shopName,jdbcType=VARCHAR},
      </if>
      <if test="shopPhone != null" >
        #{shopPhone,jdbcType=VARCHAR},
      </if>
      <if test="serviceTime != null" >
        #{serviceTime,jdbcType=TIMESTAMP},
      </if>
      <if test="tradeNum != null" >
        #{tradeNum,jdbcType=VARCHAR},
      </if>
      <if test="productNum != null" >
        #{productNum,jdbcType=SMALLINT},
      </if>
      <if test="collectionMoney != null" >
        #{collectionMoney,jdbcType=DECIMAL},
      </if>
      <if test="freightMoney != null" >
        #{freightMoney,jdbcType=DECIMAL},
      </if>
      <if test="totalAmount != null" >
        #{totalAmount,jdbcType=DECIMAL},
      </if>
      <if test="broadcastStatus != null" >
        #{broadcastStatus,jdbcType=SMALLINT},
      </if>
      <if test="singleTime != null" >
        #{singleTime,jdbcType=TIMESTAMP},
      </if>
      <if test="takeTime != null" >
        #{takeTime,jdbcType=TIMESTAMP},
      </if>
      <if test="finishTime != null" >
        #{finishTime,jdbcType=TIMESTAMP},
      </if>
      <if test="cancelTime != null" >
        #{cancelTime,jdbcType=TIMESTAMP},
      </if>
      <if test="memberId != null" >
        #{memberId,jdbcType=BIGINT},
      </if>
      <if test="memberDistance != null" >
        #{memberDistance,jdbcType=DECIMAL},
      </if>
      <if test="createTime != null" >
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="modityTime != null" >
        #{modityTime,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="net.okdi.api.entity.ShopBroadcastInfo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 22 12:38:40 CST 2015.
    -->
    update shop_broadcast_info
    <set >
      <if test="senderName != null" >
        sender_name = #{senderName,jdbcType=VARCHAR},
      </if>
      <if test="senderPhone != null" >
        sender_phone = #{senderPhone,jdbcType=VARCHAR},
      </if>
      <if test="senderTownId != null" >
        sender_town_id = #{senderTownId,jdbcType=BIGINT},
      </if>
      <if test="senderTownName != null" >
        sender_town_name = #{senderTownName,jdbcType=VARCHAR},
      </if>
      <if test="senderAddress != null" >
        sender_address = #{senderAddress,jdbcType=VARCHAR},
      </if>
      <if test="senderLongitude != null" >
        sender_longitude = #{senderLongitude,jdbcType=DECIMAL},
      </if>
      <if test="senderLatitude != null" >
        sender_latitude = #{senderLatitude,jdbcType=DECIMAL},
      </if>
      <if test="addresseeName != null" >
        addressee_name = #{addresseeName,jdbcType=VARCHAR},
      </if>
      <if test="addresseePhone != null" >
        addressee_phone = #{addresseePhone,jdbcType=VARCHAR},
      </if>
      <if test="addresseeTownId != null" >
        addressee_town_id = #{addresseeTownId,jdbcType=BIGINT},
      </if>
      <if test="addresseeTownName != null" >
        addressee_town_name = #{addresseeTownName,jdbcType=VARCHAR},
      </if>
      <if test="addresseeAddress != null" >
        addressee_address = #{addresseeAddress,jdbcType=VARCHAR},
      </if>
      <if test="addresseeLongitude != null" >
        addressee_longitude = #{addresseeLongitude,jdbcType=DECIMAL},
      </if>
      <if test="addresseeLatitude != null" >
        addressee_latitude = #{addresseeLatitude,jdbcType=DECIMAL},
      </if>
      <if test="tradeDistance != null" >
        trade_distance = #{tradeDistance,jdbcType=DECIMAL},
      </if>
      <if test="shopName != null" >
        shop_name = #{shopName,jdbcType=VARCHAR},
      </if>
      <if test="shopPhone != null" >
        shop_name = #{shopPhone,jdbcType=VARCHAR},
      </if>
      <if test="serviceTime != null" >
        service_time = #{serviceTime,jdbcType=TIMESTAMP},
      </if>
      <if test="tradeNum != null" >
        trade_num = #{tradeNum,jdbcType=VARCHAR},
      </if>
      <if test="productNum != null" >
        product_num = #{productNum,jdbcType=SMALLINT},
      </if>
      <if test="collectionMoney != null" >
        collection_money = #{collectionMoney,jdbcType=DECIMAL},
      </if>
      <if test="freightMoney != null" >
        freight_money = #{freightMoney,jdbcType=DECIMAL},
      </if>
      <if test="totalAmount != null" >
        total_amount = #{totalAmount,jdbcType=DECIMAL},
      </if>
      <if test="broadcastStatus != null" >
        broadcast_status = #{broadcastStatus,jdbcType=SMALLINT},
      </if>
      <if test="singleTime != null" >
        single_time = #{singleTime,jdbcType=TIMESTAMP},
      </if>
      <if test="takeTime != null" >
        take_time = #{takeTime,jdbcType=TIMESTAMP},
      </if>
      <if test="finishTime != null" >
        finish_time = #{finishTime,jdbcType=TIMESTAMP},
      </if>
      <if test="cancelTime != null" >
        cancel_time = #{cancelTime,jdbcType=TIMESTAMP},
      </if>
      <if test="memberId != null" >
        member_id = #{memberId,jdbcType=BIGINT},
      </if>
      <if test="memberDistance != null" >
        member_distance = #{memberDistance,jdbcType=DECIMAL},
      </if>
      <if test="createTime != null" >
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="modityTime != null" >
        modity_time = #{modityTime,jdbcType=TIMESTAMP},
      </if>
    </set>
    where broadcast_id = #{broadcastId,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="net.okdi.api.entity.ShopBroadcastInfo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 22 12:38:40 CST 2015.
    -->
    update shop_broadcast_info
    set sender_name = #{senderName,jdbcType=VARCHAR},
      sender_phone = #{senderPhone,jdbcType=VARCHAR},
      sender_town_id = #{senderTownId,jdbcType=BIGINT},
      sender_town_name = #{senderTownName,jdbcType=VARCHAR},
      sender_address = #{senderAddress,jdbcType=VARCHAR},
      sender_longitude = #{senderLongitude,jdbcType=DECIMAL},
      sender_latitude = #{senderLatitude,jdbcType=DECIMAL},
      addressee_name = #{addresseeName,jdbcType=VARCHAR},
      addressee_phone = #{addresseePhone,jdbcType=VARCHAR},
      addressee_town_id = #{addresseeTownId,jdbcType=BIGINT},
      addressee_town_name = #{addresseeTownName,jdbcType=VARCHAR},
      addressee_address = #{addresseeAddress,jdbcType=VARCHAR},
      addressee_longitude = #{addresseeLongitude,jdbcType=DECIMAL},
      addressee_latitude = #{addresseeLatitude,jdbcType=DECIMAL},
      trade_distance = #{tradeDistance,jdbcType=DECIMAL},
      shop_name = #{shopName,jdbcType=VARCHAR},
      shop_phone = #{shopPhone,jdbcType=VARCHAR},
      service_time = #{serviceTime,jdbcType=TIMESTAMP},
      trade_num = #{tradeNum,jdbcType=VARCHAR},
      product_num = #{productNum,jdbcType=SMALLINT},
      collection_money = #{collectionMoney,jdbcType=DECIMAL},
      freight_money = #{freightMoney,jdbcType=DECIMAL},
      total_amount = #{totalAmount,jdbcType=DECIMAL},
      broadcast_status = #{broadcastStatus,jdbcType=SMALLINT},
      single_time = #{singleTime,jdbcType=TIMESTAMP},
      take_time = #{takeTime,jdbcType=TIMESTAMP},
      finish_time = #{finishTime,jdbcType=TIMESTAMP},
      cancel_time = #{cancelTime,jdbcType=TIMESTAMP},
      member_id = #{memberId,jdbcType=BIGINT},
      member_distance = #{memberDistance,jdbcType=DECIMAL},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      modity_time = #{modityTime,jdbcType=TIMESTAMP}
    where broadcast_id = #{broadcastId,jdbcType=BIGINT}
  </update>



	<select id="queryTakeDeliveryStation" parameterType="java.util.Map"
		resultType="java.util.Map">
		SELECT
		sbi.broadcast_id as broadcastId,
		sbi.broadcast_status as broadcastStatus,
		sbi.member_id as memberId,
		sbi.shop_name as shopName, 
		sbi.trade_num as tradeNum,
		sbi.sender_town_name as senderTownName,
		sbi.sender_address as senderAdderss,
		sbi.addressee_town_name as addersseeTownName,
		sbi.addressee_address as addresseeAddress,
		sbi.modity_time as modityTime
		FROM
		shop_broadcast_info sbi WHERE 1=1
		<if test="queryStatus == 1 ">
			and (sbi.broadcast_status = 1 or sbi.broadcast_status = 2)
		</if>
		
		<if test="queryStatus == 2 ">
			and (sbi.broadcast_status = 3 or sbi.broadcast_status = 4)
		</if>
		
		<if test="memberId != null and memberId !=''">
			and sbi.member_id = #{memberId}
		</if>
		order by sbi.create_time desc
	</select>

	<select id="selectCount" parameterType="java.util.Map"
		resultType="java.lang.Integer">
		SELECT count(sbi.broadcast_status)
		FROM
		shop_broadcast_info sbi WHERE
		1=1
		<if test="broadcastStatus != null and broadcastStatus !=''">
			and sbi.broadcast_status = #{broadcastStatus}
		</if>
	</select>

	<select id="querySingleDetails" parameterType="java.util.Map"
		resultMap="BaseResultMap">
		SELECT
		sbi.broadcast_id as broadcastId,
		sbi.member_id as memberId,
		sbi.freight_money as freightMoney,
		sbi.service_time as serviceTime,
		sbi.member_distance as memberDistance,
		sbi.trade_distance as tradeDistance,
		sbi.sender_town_name as senderTownName,
		sbi.sender_address as senderAddress,
		sbi.sender_name as senderName,
		sbi.sender_phone as senderPhone,
		sbi.addressee_town_name as addresseeTownName,
		sbi.addressee_address as addresseeAddress,
		sbi.addressee_name as addresseeName,
		sbi.addressee_phone as addresseePhone,
		sbi.trade_num as tradeNum,
		sbi.product_num as productNum,
		sbi.total_amount as totalAmount,
		sti.product_name as productName,
		Sti.product_num as productNum
		FROM
		shop_broadcast_info sbi
		LEFT JOIN shop_trade_item sti ON
		sbi.broadcast_id = sti.broadcast_id WHERE 1=1
		<if test="broadcastId != null and broadcastId !=''">
			and sbi.broadcast_id = #{broadcastId}
		</if>

		<if test="memberId != null and memberId !=''">
			and sbi.member_Id = #{memberId}
		</if>
	</select>

	<select id="queryShopBroadcastInfoById" resultMap="BaseResultMap"
		parameterType="java.lang.Long">
		SELECT
		sbi.broadcast_id as broadcastId,
		sbi.member_id as memberId,
		sbi.freight_money as freightMoney,
		sbi.service_time as serviceTime,
		sbi.member_distance as memberDistance,
		sbi.trade_distance as tradeDistance,
		sbi.sender_town_name as senderTownName,
		sbi.sender_address as senderAddress,
		sbi.sender_name as senderName,
		sbi.sender_phone as senderPhone,
		sbi.addressee_town_name as addresseeTownName,
		sbi.addressee_address as addresseeAddress,
		sbi.addressee_name as addresseeName,
		sbi.addressee_phone as addresseePhone,
		sbi.trade_num as tradeNum,
		sbi.product_num as productNum,
		sbi.total_amount as totalAmount,
		sti.product_name as productName,
		Sti.product_num as productNum,
		FROM
		shop_broadcast_info sbi
		LEFT JOIN
		shop_trade_item sti ON
		sbi.broadcast_id = sti.broadcast_id where
		sbi.broadcast_id =
		#{broadcastId}
	</select>

	<update id="rob" parameterType="java.util.Map">
		UPDATE shop_broadcast_info
		set
		broadcast_status = 1,
		<!-- single_time = #{singleTime}, -->
		single_time = null,
		member_id=#{memberId},
		member_distance = #{memberDistance}
		where
		broadcast_id = #{broadcastId} and broadcast_status = 0
	</update>

	<update id="take" parameterType="java.util.Map">
		UPDATE shop_broadcast_info
		set
		broadcast_status = 2,
		<!-- take_time = #{takeTime} -->
		take_time = null
		where
		broadcast_id = #{broadcastId} and broadcast_status = 1
	</update>
	
	<select id="findByMemberId" resultMap="BaseResultMap" parameterType="java.lang.Long" >
    select 
    <include refid="Base_Column_List" />
    from shop_broadcast_info
    where member_id = #{memberId,jdbcType=BIGINT}
  </select>


  <select id="selectOrderDetailById" parameterType="java.lang.Long" resultType="java.util.Map">
	select broadcast_id as broadcastId, sender_name as senderName,
	sender_phone as senderPhone, sender_town_name as senderTownName,
	sender_address as senderAddress,
	addressee_name as addresseeName, addressee_phone as addresseePhone,
	addressee_town_name as addresseeTownName, addressee_address as addresseeAddress,
	trade_distance as tradeDistance, shop_name as shopName,shop_phone as shopPhone, date_format(service_time,'%Y-%m-%d %H:%i:%S') as serviceTime,
	trade_num as tradeNum, product_num as productNum, collection_money as collectionMoney,
	total_amount as totalAmount, broadcast_status as broadcastStatus, date_format(single_time,'%Y-%m-%d %H:%i:%S') as singleTime,member_distance as memberDistance,member_id as memberId,
	date_format(take_time,'%Y-%m-%d %H:%i:%S') as takeTime, date_format(finish_time,'%Y-%m-%d %H:%i:%S') as finishTime,
	 date_format(cancel_time,'%Y-%m-%d %H:%i:%S') as cancelTime,sender_latitude as senderLatitude, sender_longitude as senderLongitude 
	from shop_broadcast_info
	where broadcast_id = #{broadcastId,jdbcType=BIGINT}
   </select>

  
  <sql id="select_list_grabDelivery">
  		sbi.broadcast_id as broadcastId,
  		sender_address as senderAddress,
		addressee_address as addresseeAddress,
		service_time as serviceTime,
		trade_distance as tradeDistance,
		sender_longitude as senderLongitude,
		sender_latitude as senderLatitude,
		sender_town_name as senderTownName,
		addressee_town_name as addresseeTownName
  </sql>
  
  <select id="selectGrabDeliveryCount" resultType="java.lang.Integer" parameterType="java.lang.Long">
  	SELECT
		count(sbi.broadcast_id)
	FROM
		shop_broadcast_push_relation AS sbpr
	LEFT JOIN shop_broadcast_info AS sbi ON sbpr.broadcast_id  = sbi.broadcast_id 
	WHERE
		sbi.broadcast_status = 0
	and sbpr.member_id = #{memberId}
  </select>
  
  <select id="selectGrabDeliveryByMemberId" resultType="java.util.Map" parameterType="java.lang.Long">
	SELECT
	<include refid="select_list_grabDelivery"/>
	FROM
		shop_broadcast_push_relation sbpr
	LEFT JOIN shop_broadcast_info sbi on sbpr.broadcast_id = sbi.broadcast_id
	WHERE
		sbi.broadcast_status = 0
	AND sbpr.member_id = #{memberId}
	order by sbi.create_time desc
  </select>
  
  <update id="updateConfigDelivery">
  	UPDATE shop_broadcast_info
		SET broadcast_status = 3,
		 <!-- finish_time = #{currentTime} -->
		 finish_time = null
		  where broadcast_id = #{broadcastId} and broadcast_status = 2
  </update>
  
  <update id="cancelBroadcast">
	  UPDATE shop_broadcast_info
		SET broadcast_status = 4,
		cancel_time = null
		 where broadcast_id = #{broadcastId} and (broadcast_status = 0 OR broadcast_status = 1 OR broadcast_status = 2)
  </update>
  
  <select id="orderStatistics" resultType="java.lang.Integer" parameterType="java.lang.Long">
  	SELECT
		count(sbi.broadcast_id)
	FROM
		shop_broadcast_info AS sbi
	WHERE
		(sbi.broadcast_status = 1 or sbi.broadcast_status = 2 or sbi.broadcast_status = 3)
	and sbi.member_id = #{memberId}
  </select>
  
  <select id="todayOrder" resultType="java.lang.Integer" parameterType="java.util.Map">
  	SELECT
		count(sbi.broadcast_id)
	FROM
		shop_broadcast_info AS sbi
	WHERE
		(sbi.broadcast_status = 1 or sbi.broadcast_status = 2 or sbi.broadcast_status = 3)
		and single_time &gt;= #{currentTime} and sbi.member_id = #{memberId}
  </select>

  
  <select id="selectMemberIdByBroadcastId" resultType="java.lang.Long" parameterType="java.lang.Long">
  	select member_id as memberId from shop_broadcast_push_relation where broadcast_id = #{broadcastId}
  </select>
  
  
  <sql id="All_Column_List" >
			    broadcast_id as broadcastId, 
			    sender_name as senderName, 
			    sender_phone as senderPhone, 
			    sender_town_id as senderTownId, 
			    sender_town_name as senderTownName, 
			    sender_address as senderAddress, 
			    sender_longitude as senderLongitude, 
			    sender_latitude as senderLatitude, 
			    addressee_name as addresseeName, 
			    addressee_phone as addresseePhone, 
			    addressee_town_id as addresseeTownId, 
			    addressee_town_name as addresseeTownName, 
			    addressee_address as addresseeAddress, 
			    addressee_longitude as addresseeLongitude, 
			    addressee_latitude as addresseeLatitude, 
			    trade_distance as tradeDistance, 
			    shop_name as shopName, 
			    service_time as serviceTime, 
			    trade_num as tradeNum, 
			    product_num as productNum, 
			    collection_money as collectionMoney, 
			    freight_money as freightMoney, 
			    total_amount as totalAmount, 
			    broadcast_status as broadcastStatus, 
			    single_time as singleTime, 
			    take_time as takeTime, 
			    finish_time as finishTime, 
			    cancel_time as cancelTime, 
			    member_id as memberId, 
			    member_distance as memberDistance, 
			    create_time as createTime, 
			    modity_time as modityTime
  </sql>
  
  <select id="selectAllShopBroadcastInfo"  resultType="java.util.Map">
  	select 
    <include refid="All_Column_List" />
    from shop_broadcast_info
  </select>


  <select id="queryMemberIdByBroadCastId" resultType="java.lang.Long" parameterType="java.lang.Long">
  	select member_id as memberId from shop_broadcast_info where broadcast_id = #{broadcastId}
  </select>

</mapper>