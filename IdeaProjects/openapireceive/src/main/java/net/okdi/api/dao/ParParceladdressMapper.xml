<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="net.okdi.api.dao.ParParceladdressMapper">
  <resultMap id="BaseResultMap" type="net.okdi.api.entity.ParParceladdress">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="send_name" jdbcType="VARCHAR" property="sendName" />
    <result column="send_address_id" jdbcType="BIGINT" property="sendAddressId" />
    <result column="send_address" jdbcType="VARCHAR" property="sendAddress" />
    <result column="send_mobile" jdbcType="VARCHAR" property="sendMobile" />
    <result column="send_phone" jdbcType="VARCHAR" property="sendPhone" />
    <result column="send_zipcode" jdbcType="VARCHAR" property="sendZipcode" />
    <result column="send_cas_user_id" jdbcType="BIGINT" property="sendCasUserId" />
    <result column="send_customer_id" jdbcType="BIGINT" property="sendCustomerId" />
    <result column="send_contact_id" jdbcType="BIGINT" property="sendContactId" />
    <result column="addressee_name" jdbcType="VARCHAR" property="addresseeName" />
    <result column="addressee_address_id" jdbcType="BIGINT" property="addresseeAddressId" />
    <result column="addressee_address" jdbcType="VARCHAR" property="addresseeAddress" />
    <result column="addressee_mobile" jdbcType="VARCHAR" property="addresseeMobile" />
    <result column="addressee_phone" jdbcType="VARCHAR" property="addresseePhone" />
    <result column="addressee_zipcode" jdbcType="VARCHAR" property="addresseeZipcode" />
    <result column="addressee_cas_user_id" jdbcType="BIGINT" property="addresseeCasUserId" />
    <result column="addressee_customer_id" jdbcType="BIGINT" property="addresseeCustomerId" />
    <result column="addressee_contact_id" jdbcType="BIGINT" property="addresseeContactId" />
    <result column="agency_site_id" jdbcType="BIGINT" property="agencySiteId" />
    <result column="send_longitude" jdbcType="DECIMAL" property="sendLongitude" />
    <result column="send_latitude" jdbcType="DECIMAL" property="sendLatitude" />
    <result column="addressee_longitude" jdbcType="DECIMAL" property="addresseeLongitude" />
    <result column="addressee_latitude" jdbcType="DECIMAL" property="addresseeLatitude" />
  </resultMap>
  
  <sql id="Base_Column_List">
    id, send_name, send_address_id, send_address, send_mobile, send_phone, send_zipcode, 
    send_cas_user_id, send_customer_id, send_contact_id, addressee_name, addressee_address_id, 
    addressee_address, addressee_mobile, addressee_phone, addressee_zipcode, addressee_cas_user_id, 
    addressee_customer_id, addressee_contact_id, agency_site_id, send_longitude, send_latitude, 
    addressee_longitude, addressee_latitude
  </sql>
  
  
  	<!-- 插入包裹地址信息 -->
    <insert id="insertParceladdress" parameterType="net.okdi.api.entity.ParParceladdress">
     insert into par_parceladdress (id, send_name, send_address_id, 
      send_address, send_mobile, send_phone, 
      send_zipcode, send_cas_user_id, send_customer_id, 
      send_contact_id, addressee_name, addressee_address_id, 
      addressee_address, addressee_mobile, addressee_phone, 
      addressee_zipcode, addressee_cas_user_id, addressee_customer_id, 
      addressee_contact_id, agency_site_id, send_longitude, 
      send_latitude, addressee_longitude, addressee_latitude
      )
    values (#{id,jdbcType=BIGINT}, #{sendName,jdbcType=VARCHAR}, #{sendAddressId,jdbcType=BIGINT}, 
      #{sendAddress,jdbcType=VARCHAR}, #{sendMobile,jdbcType=VARCHAR}, #{sendPhone,jdbcType=VARCHAR}, 
      #{sendZipcode,jdbcType=VARCHAR}, #{sendCasUserId,jdbcType=BIGINT}, #{sendCustomerId,jdbcType=BIGINT}, 
      #{sendContactId,jdbcType=BIGINT}, #{addresseeName,jdbcType=VARCHAR}, #{addresseeAddressId,jdbcType=BIGINT}, 
      #{addresseeAddress,jdbcType=VARCHAR}, #{addresseeMobile,jdbcType=VARCHAR}, #{addresseePhone,jdbcType=VARCHAR}, 
      #{addresseeZipcode,jdbcType=VARCHAR}, #{addresseeCasUserId,jdbcType=BIGINT}, #{addresseeCustomerId,jdbcType=BIGINT}, 
      #{addresseeContactId,jdbcType=BIGINT}, #{agencySiteId,jdbcType=BIGINT}, #{sendLongitude,jdbcType=DECIMAL}, 
      #{sendLatitude,jdbcType=DECIMAL}, #{addresseeLongitude,jdbcType=DECIMAL}, #{addresseeLatitude,jdbcType=DECIMAL}
      )
  </insert>
  
  
  <!--  -->
    <update id="updateParceladdress" parameterType="net.okdi.api.entity.ParParceladdress">
    update par_parceladdress
      set 
<!--       id = #{id,jdbcType=BIGINT}, -->
      send_name = #{sendName,jdbcType=VARCHAR},
      send_address_id = #{sendAddressId,jdbcType=BIGINT},
      send_address = #{sendAddress,jdbcType=VARCHAR},
      send_mobile = #{sendMobile,jdbcType=VARCHAR},
      send_phone = #{sendPhone,jdbcType=VARCHAR},
      send_zipcode = #{sendZipcode,jdbcType=VARCHAR},
      send_cas_user_id = #{sendCasUserId,jdbcType=BIGINT},
      send_customer_id = #{sendCustomerId,jdbcType=BIGINT},
      send_contact_id = #{sendContactId,jdbcType=BIGINT},
      addressee_name = #{addresseeName,jdbcType=VARCHAR},
      addressee_address_id = #{addresseeAddressId,jdbcType=BIGINT},
      addressee_address = #{addresseeAddress,jdbcType=VARCHAR},
      addressee_mobile = #{addresseeMobile,jdbcType=VARCHAR},
      addressee_phone = #{addresseePhone,jdbcType=VARCHAR},
      addressee_zipcode = #{addresseeZipcode,jdbcType=VARCHAR},
      addressee_cas_user_id = #{addresseeCasUserId,jdbcType=BIGINT},
      addressee_customer_id = #{addresseeCustomerId,jdbcType=BIGINT},
      addressee_contact_id = #{addresseeContactId,jdbcType=BIGINT},
      agency_site_id = #{agencySiteId,jdbcType=BIGINT},
      send_longitude = #{sendLongitude,jdbcType=DECIMAL},
      send_latitude = #{sendLatitude,jdbcType=DECIMAL},
      addressee_longitude = #{addresseeLongitude,jdbcType=DECIMAL},
      addressee_latitude = #{addresseeLatitude,jdbcType=DECIMAL}
	where id = #{id,jdbcType=BIGINT}
  </update>
  
  
  <update id="updateParceladdressSelective" parameterType="net.okdi.api.entity.ParParceladdress">
  	update par_parceladdress
      <set>
	      <if test="sendName != null">
	      	send_name = #{sendName,jdbcType=VARCHAR},
	      </if>
	      <if test="sendAddressId != null">
	      	send_address_id = #{sendAddressId,jdbcType=BIGINT},
	      </if>
	      <if test="sendAddress != null">
	      	send_address = #{sendAddress,jdbcType=VARCHAR},
	      </if>
	      <if test="sendMobile != null">
			send_mobile = #{sendMobile,jdbcType=VARCHAR},      	
	      </if>
	      <if test="sendPhone != null">
	      	send_phone = #{sendPhone,jdbcType=VARCHAR},	
	      </if>
	      <if test="sendZipcode != null">
	      	send_zipcode = #{sendZipcode,jdbcType=VARCHAR},
	      </if>
	      <if test="sendCasUserId != null">
	      	send_cas_user_id = #{sendCasUserId,jdbcType=BIGINT},	
	      </if>
	      <if test="sendCustomerId != null">
	      	send_customer_id = #{sendCustomerId,jdbcType=BIGINT},
	      </if>
	      <if test="sendContactId != null">
	      	send_contact_id = #{sendContactId,jdbcType=BIGINT},
	      </if>
	      <if test="addresseeName != null">
	      	addressee_name = #{addresseeName,jdbcType=VARCHAR},	
	      </if>
	      <if test="addresseeAddressId != null">
	      	addressee_address_id = #{addresseeAddressId,jdbcType=BIGINT},	
	      </if>
	      <if test="addresseeAddress != null">
	      	addressee_address = #{addresseeAddress,jdbcType=VARCHAR},	
	      </if>
	      <if test="addresseeMobile != null">
	      	addressee_mobile = #{addresseeMobile,jdbcType=VARCHAR},	
	      </if>
	      <if test="addresseePhone != null">
	      	addressee_phone = #{addresseePhone,jdbcType=VARCHAR},	
	      </if>
	      <if test="addresseeZipcode != null">
	      	addressee_zipcode = #{addresseeZipcode,jdbcType=VARCHAR},	
	      </if>
	      <if test="addresseeCasUserId != null">
	      	addressee_cas_user_id = #{addresseeCasUserId,jdbcType=BIGINT},	
	      </if>
	      <if test="addresseeCustomerId != null">
	      	addressee_customer_id = #{addresseeCustomerId,jdbcType=BIGINT},	
	      </if>
	      <if test="addresseeContactId != null">
	      	addressee_contact_id = #{addresseeContactId,jdbcType=BIGINT},	
	      </if>
	      <if test="agencySiteId != null">
	      	agency_site_id = #{agencySiteId,jdbcType=BIGINT},	
	      </if>
	      <if test="sendLongitude != null">
	      	send_longitude = #{sendLongitude,jdbcType=DECIMAL},	
	      </if>
	      <if test="sendLatitude != null">
	      	send_latitude = #{sendLatitude,jdbcType=DECIMAL},	
	      </if>
	      <if test="addresseeLongitude != null">
	      	addressee_longitude = #{addresseeLongitude,jdbcType=DECIMAL},	
	      </if>
	      <if test="addresseeLatitude != null">
	      	addressee_latitude = #{addresseeLatitude,jdbcType=DECIMAL} 	
	      </if>
      </set>
	where id = #{id,jdbcType=BIGINT}
  </update>
  
  
  <!-- 根据id删除 包裹地址信息 -->
  <delete id="deleteParceladdress" parameterType="java.lang.Long">
    delete from par_parceladdress
    where id = #{id,jdbcType=BIGINT}
  </delete>
  
  <!-- 根据id查询包裹地址信息 -->
    <select id="findParceladdress" parameterType="java.lang.Long" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from par_parceladdress
    where id = #{id,jdbcType=BIGINT}
  </select>
  
  <!-- 批量插入包裹地址信息 -->
    <insert id="addbatchSaveParcelAddressInfo" parameterType="java.util.List" >
     insert into par_parceladdress (id, send_name, send_address_id, 
      send_address, send_mobile, send_phone, 
      send_zipcode, send_cas_user_id, send_customer_id, 
      send_contact_id, addressee_name, addressee_address_id, 
      addressee_address, addressee_mobile, addressee_phone, 
      addressee_zipcode, addressee_cas_user_id, addressee_customer_id, 
      addressee_contact_id, agency_site_id, send_longitude, 
      send_latitude, addressee_longitude, addressee_latitude
      )
    values
    <foreach collection="list" item="item" index="index" separator="," >  
	(
	#{item.id,jdbcType=BIGINT}, #{item.sendName,jdbcType=VARCHAR}, #{item.sendAddressId,jdbcType=BIGINT}, 
      #{item.sendAddress,jdbcType=VARCHAR}, #{item.sendMobile,jdbcType=VARCHAR}, #{item.sendPhone,jdbcType=VARCHAR}, 
      #{item.sendZipcode,jdbcType=VARCHAR}, #{item.sendCasUserId,jdbcType=BIGINT}, #{item.sendCustomerId,jdbcType=BIGINT}, 
      #{item.sendContactId,jdbcType=BIGINT}, #{item.addresseeName,jdbcType=VARCHAR}, #{item.addresseeAddressId,jdbcType=BIGINT}, 
      #{item.addresseeAddress,jdbcType=VARCHAR}, #{item.addresseeMobile,jdbcType=VARCHAR}, #{item.addresseePhone,jdbcType=VARCHAR}, 
      #{item.addresseeZipcode,jdbcType=VARCHAR}, #{item.addresseeCasUserId,jdbcType=BIGINT}, #{item.addresseeCustomerId,jdbcType=BIGINT}, 
      #{item.addresseeContactId,jdbcType=BIGINT}, #{item.agencySiteId,jdbcType=BIGINT}, #{item.sendLongitude,jdbcType=DECIMAL}, 
      #{item.sendLatitude,jdbcType=DECIMAL}, #{item.addresseeLongitude,jdbcType=DECIMAL}, #{item.addresseeLatitude,jdbcType=DECIMAL}
      )
    </foreach>  
  </insert>
  
  <select id="queryParcelIdsBySendUserId" parameterType="java.lang.Long" resultType="java.lang.Long">
	select p.id from par_parceladdress p LEFT JOIN par_parcelinfo i ON p.id=i.id 
	where p.send_cas_user_id=#{memberId} and i.exp_waybill_num is not null ORDER BY p.id
  </select>
  
</mapper>